{"version":3,"sources":["../src/loadCoverage.js"],"names":["require","Collector","fs","module","exports","loadCoverage","sources","options","warn","console","readJSON","filePath","existsSync","Error","JSON","parse","readFileSync","length","SyntaxError","collector","forEach","add","getFinalCoverage"],"mappings":";;eAAsBA,QAAQ,UAAR,C;IAAdC,S,YAAAA,S;;AAER,IAAMC,KAAKF,QAAQ,IAAR,CAAX;AACA;;;;;;;;;AASAG,OAAOC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,OAAtB,EAA6C;AAAA,KAAdC,OAAc,uEAAJ,EAAI;;AAC7D,KAAMC,OAAOD,QAAQC,IAAR,IAAgBC,QAAQD,IAArC;;AAEA,KAAME,WAAWH,QAAQG,QAAR,IACb,UAAUC,QAAV,EAAoB;AACtB,MAAI,CAACT,GAAGU,UAAH,CAAcD,QAAd,CAAL,EAA8B;AAC7BH,QAAK,IAAIK,KAAJ,yBAAgCF,QAAhC,OAAL;AACA,UAAO,EAAP;AACA;AACD,SAAOG,KAAKC,KAAL,CAAWb,GAAGc,YAAH,CAAgBL,QAAhB,CAAX,CAAP;AACA,EAPF;;AASA,KAAI,OAAOL,OAAP,KAAmB,QAAvB,EAAiC;AAChCA,YAAU,CAACA,OAAD,CAAV;AACA;AACD,KAAI,CAACA,QAAQW,MAAb,EAAqB;AACpBT,OAAK,IAAIU,WAAJ,CAAgB,6BAAhB,CAAL;AACA;AACD,KAAMC,YAAY,IAAIlB,SAAJ,EAAlB;AACAK,SAAQc,OAAR,CAAgB,UAACT,QAAD,EAAc;AAC7BQ,YAAUE,GAAV,CAAcX,SAASC,QAAT,CAAd;AACA,EAFD;;AAIA,QAAOQ,UAAUG,gBAAV,EAAP;AACA,CAxBD","file":"loadCoverage.js","sourcesContent":["const { Collector } = require('istanbul');\n\nconst fs = require('fs');\n/**\n * Takes sources of coverage information and adds them to a collector which then can be subsequently\n * remapped.\n * @param  {Array|string}           sources  The source(s) of the JSON coverage information\n * @param  {Object}                 options? A hash of options that can be set:\n *                                               readJSON?: A function that can read and parse a JSON file\n *                                               warn?: A function that logs warning messages\n * @return {Object}                          The loaded coverage object\n */\nmodule.exports = function loadCoverage(sources, options = {}) {\n\tconst warn = options.warn || console.warn;\n\n\tconst readJSON = options.readJSON\n\t\t|| function (filePath) {\n\t\t\tif (!fs.existsSync(filePath)) {\n\t\t\t\twarn(new Error(`Cannot find file: \"${filePath}\"`));\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\treturn JSON.parse(fs.readFileSync(filePath));\n\t\t};\n\n\tif (typeof sources === 'string') {\n\t\tsources = [sources];\n\t}\n\tif (!sources.length) {\n\t\twarn(new SyntaxError('No coverage files supplied!'));\n\t}\n\tconst collector = new Collector();\n\tsources.forEach((filePath) => {\n\t\tcollector.add(readJSON(filePath));\n\t});\n\n\treturn collector.getFinalCoverage();\n};\n"]}